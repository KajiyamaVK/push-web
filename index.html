<html lang="en">
<head>
    <title>Document</title>
</head>
<body>
    <button onclick="subscribe()">
        Subscribe
    </button>

    <script>

        addEventListener('load', async()=>{

            let sw = await navigator.serviceWorker.register('./sw.js')
            console.log('VK',sw)
        })

        async function subscribe(){
            let sw = await navigator.serviceWorker.ready;
            let push = await sw.pushManager.subscribe({
                userVisibleOnly:true,
                applicationServerKey: 'BDCGyBiStIkJOEfN1JunUrvBZUVQUCHV6y-RF4rb4RfSbrQZToXYzZ7yDwxR-zstNl_RlbrK5rUQJvj18Fy_tTA'
            })
            console.log(JSON.stringify(push))
        }


    </script>
</body>
</html>